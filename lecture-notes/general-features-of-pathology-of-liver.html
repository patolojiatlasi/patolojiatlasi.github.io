<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>general-features-of-pathology-of-liver</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="general-features-of-pathology-of-liver_files/libs/clipboard/clipboard.min.js"></script>
<script src="general-features-of-pathology-of-liver_files/libs/quarto-html/quarto.js"></script>
<script src="general-features-of-pathology-of-liver_files/libs/quarto-html/popper.min.js"></script>
<script src="general-features-of-pathology-of-liver_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="general-features-of-pathology-of-liver_files/libs/quarto-html/anchor.min.js"></script>
<link href="general-features-of-pathology-of-liver_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="general-features-of-pathology-of-liver_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="general-features-of-pathology-of-liver_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="general-features-of-pathology-of-liver_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="general-features-of-pathology-of-liver_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver0.jpg" class="img-fluid"></p>
<section id="general-features-of-pathology-of-liver" class="level1">
<h1>General Features of Pathology of Liver</h1>
</section>
<section id="serdar-balci-md" class="level1">
<h1>Serdar BALCI, MD</h1>
</section>
<section id="liver" class="level1">
<h1>Liver</h1>
<ul>
<li><strong>1400-1600 gr</strong></li>
<li><strong>Dual blood supply</strong></li>
<li><strong>Bile flow</strong></li>
<li><strong>Well defined 3D structure</strong></li>
<li><strong>Exocrine organ</strong></li>
<li><strong>Endocrine organ</strong></li>
<li><strong>Center for biochemistry</strong>
<ul>
<li><strong>Anabolism, catabolism, detoxification</strong></li>
</ul></li>
</ul>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver1.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver2.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver3.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver4.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver5.png" class="img-fluid"></p>
<p><strong>Atlas of Liver Pathology</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver6.png" class="img-fluid"></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver7.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver8.png" class="img-fluid"></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver9.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver10.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver11.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver12.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver13.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver14.png" class="img-fluid"></p>
</section>
<section id="liver-injury" class="level1">
<h1>LIVER INJURY</h1>
</section>
<section id="degenerative-potentially-reversible-changes" class="level1">
<h1>Degenerative, potentially reversible changes</h1>
<p><strong>Accumulation of fat (steatosis)</strong></p>
<p><strong>Accumulation of bilirubin (cholestasis)</strong></p>
</section>
<section id="when-injury-is-not-reversible-necrosis-or-apoptosis" class="level1">
<h1>When injury is not reversible:Necrosis or Apoptosis</h1>
<ul>
<li><strong>Necrosis</strong>
<ul>
<li><strong>Ischemic/hypoxic injury</strong></li>
<li><strong>Response to oxidative stress</strong></li>
</ul></li>
<li><strong>Apoptosis</strong>
<ul>
<li><strong>Acidophilic apoptotic bodies</strong></li>
<li><strong>Councilman bodies (yellow fever)</strong></li>
<li><strong>Acidophil bodies</strong></li>
</ul></li>
</ul>
</section>
<section id="necrosis" class="level1">
<h1>Necrosis</h1>
<ul>
<li><strong>Confluent necrosis</strong>
<ul>
<li><strong>a severe, zonal loss of hepatocytes</strong></li>
<li><strong>widespread parenchymal loss</strong></li>
<li><strong>begin as a zone of hepatocyte dropout around the central vein → this space is filled by cellular debris, macrophages, and remnants of the reticulin meshwork</strong></li>
</ul></li>
<li><strong>Bridging necrosis</strong>
<ul>
<li><strong>Necrosis zone link central veins to portal tracts or bridge adjacent portal tracts</strong></li>
</ul></li>
</ul>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver15.png" class="img-fluid"></p>
<p><strong>apoptotic hepatocytes</strong></p>
<p><strong>acidophil bodies</strong></p>
<p><strong>focus of mononuclear infiltration </strong></p>
<p><strong>clusters of macrophages with eosinophilic cytoplasm indicate foci where hepatocytes have undergone necrosis</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver16.png" class="img-fluid"></p>
<p><strong>Normal liver with patent portal and hepatic veins</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver17.png" class="img-fluid"></p>
<p><strong>Extinction occurs when contiguous hepatocytes die, usually after inflammatory injury to their blood supply </strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver18.png" class="img-fluid"></p>
<p><strong>Empty parenchyma collapses and begins to scar and adjacent portal tracts and hepatic veins become approximated</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver19.png" class="img-fluid"></p>
<p><strong>Scars in regions of extinction contract and condense, becoming fibrous septa</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver20.png" class="img-fluid"></p>
<p><strong>Septa elongate by the traction caused by hyperplasia of adjacent hepatocytes</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver21.png" class="img-fluid"></p>
<p><strong>Septa are resorbed. The resulting tissue has either venoportal fibrous adhesions or hepatic veins that are closely approximated to portal tracts. Portal tracts are remnants, often with no portal vein</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver22.png" class="img-fluid"></p>
</section>
<section id="regeneration-of-lost-hepatocytes" class="level1">
<h1>Regeneration of lost hepatocytes</h1>
<ul>
<li><strong>Occurs primarily by mitotic replication of hepatocytes adjacent to those that have died, even when there is significant confluent necrosis</strong></li>
<li><strong>Hepatocytes are almost stem cell-like in their ability to continue to replicate even in the setting of years of chronic injury</strong>
<ul>
<li><strong>Stem cell replenishment is usually not a significant part of parenchymal repair.</strong></li>
</ul></li>
<li><strong>In most severe forms of acute liver failure</strong>
<ul>
<li><strong>Activation of the primary intrahepatic stem cell niche (canal of Hering)</strong></li>
</ul></li>
</ul>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver23.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver24.png" class="img-fluid"></p>
<p><strong>Robbins and Cotran Pathologic Basis of Disease</strong></p>
</section>
<section id="scar-formation-and-regression" class="level1">
<h1>Scar Formation and Regression</h1>
<ul>
<li><strong>Principal cell type involved in scar deposition is the hepatic stellate cell</strong>
<ul>
<li><strong>Normally it is a lipid (vitamin A) storing cell</strong></li>
<li><strong>Become activated and are converted into highly fibrogenic myofibroblasts</strong></li>
</ul></li>
<li><strong>Stellate cells are activated by</strong></li>
<li><strong>chronic inflammation, with production of inflammatory cytokines such as tumor necrosis factor (TNF), lymphotoxin, and interleukin-1β (IL-1β), and lipid peroxidation products</strong></li>
<li><strong>Cytokine and chemokine production by Kupffer cells, endothelial cells, hepatocytes, and bile duct epithelial cells</strong></li>
<li><strong>In response to disruption of the extracellular matrix (ECM)</strong></li>
<li><strong>Direct stimulation of stellate cells by toxins</strong></li>
</ul>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver25.png" class="img-fluid"></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver26.png" class="img-fluid"></p>
<p><strong>types I and III collagen and other ECM components</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver27.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver28.png" class="img-fluid"></p>
<p><strong>types I and III collagen and other ECM components</strong></p>
<p><strong>Robbins Basic Pathology</strong></p>
</section>
<section id="acute-hepatitis" class="level1">
<h1>ACUTE HEPATITIS</h1>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver29.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
</section>
<section id="acute-hepatitis-1" class="level1">
<h1>Acute Hepatitis</h1>
<ul>
<li><p><strong>Mild acute hepatitis gross inspection</strong></p>
<ul>
<li><strong>Liver is normal or slightly mottled</strong></li>
</ul></li>
<li><p><strong>Massive hepatic necrosis</strong></p>
<ul>
<li><strong>Shrink to 500 to 700 g</strong></li>
<li><strong>Limp, red organ covered by a wrinkled, baggy capsule</strong></li>
</ul></li>
<li><p><strong>Entire liver may be involved, or only patchy areas affected</strong></p></li>
<li><p><strong>Necrotic areas have a muddy-red, mushy appearance with blotchy bile staining</strong></p></li>
<li><p><strong>If patients survive for more than a week, surviving hepatocytes begin to regenerate</strong></p></li>
<li><p><strong>If the parenchymal framework is preserved, regeneration is orderly and liver architecture is restored</strong></p></li>
<li><p><strong>More massive destruction, regeneration is disorderly, yielding nodular masses of liver cells separated by granulation tissue and, eventually, scar, particularly in patients with a protracted course of submassive necrosis</strong></p></li>
<li><p><strong>Hepatocyte injury</strong></p></li>
<li><p><strong>Swelling (ballooning degeneration)</strong></p>
<ul>
<li><strong>empty-appearing pale cytoplasm</strong></li>
<li><strong>rupture and undergo necrosis (cytolysis)</strong></li>
<li><strong>Necrotic cells appear to have dropped out, leaving collapsing sinusoidal collagen reticulin framework behind</strong></li>
</ul></li>
<li><p><strong>Apoptosis</strong></p>
<ul>
<li><strong>Hepatocytes shrink</strong></li>
<li><strong>Intensely eosinophilic</strong></li>
<li><strong>Fragmented nuclei</strong></li>
<li><strong>Effector T cells may be present in the immediate vicinity</strong></li>
</ul></li>
<li><p><strong>When located in the parenchyma away from portal tracts, these features are called lobular hepatitis</strong></p></li>
</ul>
<p><strong>Acute viral hepatitis showing disruption of lobular architecture, inflammatory cells in sinusoids, and apoptotic cells </strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver30.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
<p><strong>In severe cases, confluent necrosis of hepatocytes is seen around central veins</strong></p>
<p><strong>Cellular debris, collapsed reticulin fibers, congestion/hemorrhage, and variable inflammation</strong></p>
<p><strong>Increasing severity, central-portal bridging necrosis develops</strong></p>
<p><strong>Parenchymal collapse</strong></p>
<p><strong>Massive hepatic necrosis and fulminant liver failure</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver31.png" class="img-fluid"></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver32.png" class="img-fluid"></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver33.png" class="img-fluid"></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver34.png" class="img-fluid"></p>
<p><strong>Massive hepatic necrosis</strong></p>
<p><strong>the wrinkled capsule and irregular nodularity of the generally necrotic liver is due to collapse of the parenchyma</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver35.png" class="img-fluid"></p>
<p><strong>Autopsy Pathology: A Manual and Atlas</strong></p>
<p><strong>Massive necrosis, cut section of liver. The liver is small (700 g), bile-stained, soft, and congested</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver36.png" class="img-fluid"></p>
<p><strong>Hepatocellular necrosis caused by acetaminophen overdose. Confluent necrosis is seen in the perivenular region (zone 3)</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver37.png" class="img-fluid"></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver38.png" class="img-fluid"></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver39.png" class="img-fluid"></p>
<p><strong>Robbins and Cotran’s Pathological Basis of Diseases</strong></p>
</section>
<section id="chronic-hepatitis" class="level1">
<h1>CHRONIC HEPATITIS</h1>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver40.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
</section>
<section id="chronic-hepatitis-1" class="level1">
<h1>Chronic Hepatitis</h1>
<p><strong>Portal inflammation in acute hepatitis is minimal or absent</strong></p>
<p><strong>Dense mononuclear portal infiltrates of variable prominence are the defining lesion of chronic hepatitis</strong></p>
<p><strong>There is often interface hepatitis as well,</strong></p>
<p><strong>Distinguished from lobular hepatitis by its location at the interface between hepatocellular parenchyma and portal stroma (or scars, when present)</strong></p>
<p><strong>The hallmark of severe chronic liver damage is scarring. At first, only portal tracts exhibit fibrosis, but in some patients, with time, fibrous septa —bands of dense scar—will extend between portal tracts</strong></p>
<p><strong>In the most severe cases, continued scarring and nodule formation leads to the development of cirrhosis</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver41.png" class="img-fluid"></p>
<p><strong>Robbins Basic Pathology</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver42.png" class="img-fluid"></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver43.png" class="img-fluid"></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver44.png" class="img-fluid"></p>
<p><strong>Cirrhosis resulting from chronic viral hepatitis</strong></p>
<p><strong>Robbins Basic Pathology</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver45.png" class="img-fluid"></p>
</section>
<section id="grading-and-staging-of-chronic-hepatitis" class="level1">
<h1>Grading and Staging of Chronic Hepatitis</h1>
<ul>
<li><strong>Staging</strong>
<ul>
<li><strong>Accessing the severity of fibrosis</strong></li>
</ul></li>
<li><strong>Grading</strong>
<ul>
<li><strong>Accessing the severity of inflammation</strong></li>
</ul></li>
<li><strong>There are different systems for different diseases</strong></li>
</ul>
<p><strong>An example for Staging of Fibrosis</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver46.png" class="img-fluid"></p>
<p><strong>Modern Pathology (2007) 20, S3–S14</strong></p>
<p><strong>An example for Grading of İnflammatory Activity</strong></p>
<p><img src="img%5CGeneral-Features-of-Pathology-of-Liver47.png" class="img-fluid"></p>
<p><strong>Modern Pathology (2007) 20, S3–S14</strong></p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>